FIND_PACKAGE(BISON)
FIND_PACKAGE(FLEX)

set(Boost_USE_STATIC_LIBS ON)
find_package(Boost 1.39.0 COMPONENTS regex REQUIRED)

if(MSVC)
ADD_DEFINITIONS("/D YY_NO_UNISTD_H")
endif()

FLEX_TARGET(SlnL sln.ll 
            ${CMAKE_CURRENT_SOURCE_DIR}/lex.yysln.cpp 
            COMPILE_FLAGS "-Pyysln_")

BISON_TARGET(SlnY sln.yy 
             ${CMAKE_CURRENT_SOURCE_DIR}/sln.tab.cpp 
             COMPILE_FLAGS "-pyysln_")

ADD_FLEX_BISON_DEPENDENCY(SlnL SlnY)

rdkit_library(SLNParse
              InputFiller.cpp SLNParse.cpp SLNAttribs.cpp 
              ${BISON_SlnY_OUTPUTS} ${FLEX_SlnL_OUTPUTS}
              LINK_LIBRARIES GraphMol)

rdkit_test(testSLNParse test.cpp 
           LINK_LIBRARIES SLNParse SmilesParse SubstructMatch
GraphMol RDGeometryLib RDGeneral  ${Boost_REGEX_LIBRARY}
)

set(Boost_USE_STATIC_LIBS OFF)
add_subdirectory(Wrap)


